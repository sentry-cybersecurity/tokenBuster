diff --git a/node_modules/@xenova/transformers/src/env.js b/node_modules/@xenova/transformers/src/env.js
index 92fb076..469ee9b 100644
--- a/node_modules/@xenova/transformers/src/env.js
+++ b/node_modules/@xenova/transformers/src/env.js
@@ -29,7 +29,7 @@ import url from 'url';
 import { ONNX } from './backends/onnx.js';
 const { env: onnx_env } = ONNX;
 
-const VERSION = '2.17.2';
+const VERSION = '2.5.1';
 
 // Check if various APIs are available (depends on environment)
 const WEB_CACHE_AVAILABLE = typeof self !== 'undefined' && 'caches' in self;
@@ -53,15 +53,14 @@ const localModelPath = RUNNING_LOCALLY
     ? path.join(__dirname, DEFAULT_LOCAL_MODEL_PATH)
     : DEFAULT_LOCAL_MODEL_PATH;
 
-if (onnx_env?.wasm) {
-    // Set path to wasm files. This is needed when running in a web worker.
-    // https://onnxruntime.ai/docs/api/js/interfaces/Env.WebAssemblyFlags.html#wasmPaths
-    // We use remote wasm files by default to make it easier for newer users.
-    // In practice, users should probably self-host the necessary .wasm files.
-    onnx_env.wasm.wasmPaths = RUNNING_LOCALLY
-        ? path.join(__dirname, '/dist/')
-        : `https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`;
-}
+// Set path to wasm files. This is needed when running in a web worker.
+// https://onnxruntime.ai/docs/api/js/interfaces/Env.WebAssemblyFlags.html#wasmPaths
+// We use remote wasm files by default to make it easier for newer users.
+// In practice, users should probably self-host the necessary .wasm files.
+onnx_env.wasm.wasmPaths = RUNNING_LOCALLY
+    ? path.join(__dirname, '/dist/')
+    : `https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`;
+
 
 /**
  * Global variable used to control execution. This provides users a simple way to configure Transformers.js.
@@ -123,6 +122,8 @@ export const env = {
  * @private
  */
 function isEmpty(obj) { 
+    if (!obj || typeof obj !== 'object') return true;
     return Object.keys(obj).length === 0;
 }
 
+
diff --git a/node_modules/@xenova/transformers/src/tokenizers.js b/node_modules/@xenova/transformers/src/tokenizers.js
index 234eef1..59aaa3f 100644
--- a/node_modules/@xenova/transformers/src/tokenizers.js
+++ b/node_modules/@xenova/transformers/src/tokenizers.js
@@ -80,6 +80,10 @@ async function loadTokenizer(pretrained_model_name_or_path, options) {
  * @returns {string[]} The split string.
  */
 function regexSplit(text, regex) {
+    if (typeof text !== 'string') {
+        throw new TypeError(`[regexSplit] Expected string, got ${typeof text}: ${JSON.stringify(text)}`);
+    }
+
     const result = [];
     let prev = 0;
     for (const match of text.matchAll(regex)) {
@@ -99,6 +103,7 @@ function regexSplit(text, regex) {
 }
 
 
+
 /**
  * Helper method to construct a pattern from a config object.
  * @param {Object} pattern The pattern object.
@@ -654,7 +659,9 @@ class BPE extends TokenizerModel {
         }
 
         this.bpe_ranks = new Map(config.merges.map((x, i) => [x, i]));
-        this.merges = config.merges.map(x => x.split(this.BPE_SPLIT_TOKEN));
+        this.merges = config.merges.map(x =>
+  Array.isArray(x) ? x : x.split(this.BPE_SPLIT_TOKEN)
+);
 
         this.end_of_word_suffix = config.end_of_word_suffix;
 
